# 3D Object Tracker

This project is an object tracker for 3D video content which I
developed as part of my Bachelor's thesis.

Currently the tracking algorithm is part of the tracking executable,
however will be extracted into a separate library in the future.

# Building

OpenCV version 3.3.1 or later is required.

To compile the system navigate run the following commands:

```shell
cmake .
make
```


To build the single-core version of the 3D tracker use the
following:

```shell
cmake . -DPARALLEL=OFF
make
```

To ensure that all optimisations are enabled use the
-DCMAKE_BUILD_TYPE=RELEASE cmake option.

When rebuilding the project with a different option, erase all files
generated by cmake, prior to running the above commands.

# Issues

The clang compiler bundled with Mac OS X does not support OpenMP and
hence cannot build the parallelised 3D tracker. An alternative
compiler such as GCC is required. GCC version 7 was used in this
project. To build the project with an alternative compiler use the
following, substituting gcc-7 and g++-7 with the C and C++ compiler
commands.

```shell
CC=gcc-7 CXX=g++-7 cmake .. [additional cmake options]
```

The Linux version of OpenCV's HighGUI offers a better user interface
than the OS X version. The OS X version does not work well with high
resolution videos.


# Usage

To run the system, run the following command in the cmake-build-debug directory:

```
./tracker [path to view info file]
```

The view info file contains the path to the colour and depth
video files, the video dimensions and camera parameters.

The format of the data file for a single view is the
following (substitute the parts in [] brackets):

    [Video Width] [Video Height]
	[Path to view's colour video YUV file]
    [Path to view's depth video YUV file]
	[Z-Near] [Z-Far]
	[Intrinsic Matrix 4x4]
	[Extrinsic Matrix 4x4]

If the extrinsic and intrinsic matrices given are not 4x4, pad with
extra rows/columns with all elements zeros excluding the elements
along the leading diagonal which should be ones.

The parameters of the remaining views are included following the
parameters of the first views. There is no upper limit on the number
of views.

Once the tracker is loaded, a window displaying each view's colour
video sequence is created. Initially the first frame of each video is
displayed.

1. Click on the view in which to select the initial ROI (region of
interest), this view becomes the primary view
	 
2. Click and drag to select the rectangular ROI surrounding the
object. A blue rectangle appears showing your selection. Release the
mouse once you've chosen the region.

3. Press the Enter key to perform object detection in that region. A
transparent red overlay of the detected object's region is shown in
all view windows.
	 
4. Press the Enter key to begin tracking. The tracking window is
displayed on the window as a red rectangle.

5. Once the tracking procedure terminates, press the Escape key to
close the program.
